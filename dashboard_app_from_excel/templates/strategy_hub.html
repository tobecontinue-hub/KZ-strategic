<!-- templates/strategy_hub.html -->
{% extends "base.html" %}
{% block content %}

<style>
.tab-content {
  padding: 24px;
  background: white;
  border-radius: 0 0 14px 14px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.06);
  border: 1px solid #eaeaea;
}

.kpi-card {
  background: #f8fbff;
  border-left: 5px solid #1976d2;
  padding: 18px;
  border-radius: 12px;
  margin-bottom: 16px;
  transition: transform 0.2s;
}
.kpi-card:hover {
  transform: translateX(4px);
  background: #eef7ff;
}
.kpi-category {
  font-size: 0.85rem;
  color: #0066cc;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}
.kpi-name {
  font-weight: 700;
  font-size: 1.1rem;
  color: #073047;
  margin: 4px 0;
}
.metric-row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 12px;
  margin-top: 8px;
}
.metric-item {
  text-align: center;
  padding: 8px;
  background: #eef7ff;
  border-radius: 8px;
  font-size: 0.9rem;
}
.metric-label {
  font-size: 0.8rem;
  color: #555;
}
.metric-value {
  font-weight: 700;
  color: #0d47a1;
}

.op-row, .decision-row {
  display: grid;
  grid-template-columns: 1.2fr 1fr 1fr 1fr 1fr;
  gap: 12px;
  padding: 12px 0;
  border-bottom: 1px solid #eee;
  align-items: center;
  font-size: 0.95rem;
}
.op-header, .decision-header {
  font-weight: 700;
  color: #073047;
  padding: 10px 0;
  border-bottom: 2px solid #0066cc;
}
.status-badge {
  padding: 4px 10px;
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 600;
}
.status-high { background: #e3f2fd; color: #0d47a1; }
.status-critical { background: #ffebee; color: #c62828; }
.status-warning { background: #fff8e1; color: #e65100; }
.status-ontrack { background: #e8f5e9; color: #2e7d32; }
.status-open { background: #f3e5f5; color: #6a1b9a; }

@media (max-width: 992px) {
  .op-row, .decision-row {
    grid-template-columns: 1fr;
    gap: 8px;
  }
  .op-row div, .decision-row div {
    width: 100% !important;
  }
}
</style>

<div class="container mt-3">

  <div class="v-banner mb-4" style="padding:20px; border-radius:14px;">
    <h2 style="margin:0">Strategy Hub — 2026</h2>
    <div style="color:#084c61">Performance, operations, and decisions in one unified view.</div>
  </div>

  <!-- Tabs -->
  <ul class="nav nav-tabs" id="strategyTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="fna-tab" data-bs-toggle="tab" data-bs-target="#fna" type="button">FNA Performance</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="ops-tab" data-bs-toggle="tab" data-bs-target="#ops" type="button">Operations Health</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="decisions-tab" data-bs-toggle="tab" data-bs-target="#decisions" type="button">Key Decisions</button>
    </li>
  </ul>

  <div class="tab-content" id="strategyTabContent">

    <!-- FNA Performance Tab -->
<div class="tab-pane fade show active" id="fna" role="tabpanel">
  {% if fna %}
    <div class="row g-3">
      {% for item in fna %}
        <div class="col-lg-6">
          <div class="kpi-card">
            <div class="kpi-category">{{ item.get('KPI Category', 'General') }}</div>
            <div class="kpi-name">{{ item.get('Metric Name', 'Unnamed Metric') }}</div>
            <div class="metric-row">
              <div class="metric-item">
                <div class="metric-label">2024</div>
                <div class="metric-value">{{ item.get('2024', '–') }}</div>
              </div>
              <div class="metric-item">
                <div class="metric-label">2025</div>
                <div class="metric-value">{{ item.get('2025', '–') }}</div>
              </div>
              <div class="metric-item">
                <div class="metric-label">Variance (YoY)</div>
                <div class="metric-value">
                  {{ item.get('Variance (YoY Change)', item.get('Variance', '–')) }}
                </div>
              </div>
            </div>
            {% if item.get('Rationale') %}
              <div class="mt-2" style="font-size:0.9rem; color:#555;">
                {{ item.get('Rationale', '') }}
              </div>
            {% endif %}
            {% if item.get('Status') %}
              {% set status = item.get('Status','') %}
              {% if 'On Track' in status %}
                <span class="status-badge status-ontrack">{{ status }}</span>
              {% elif 'Warning' in status %}
                <span class="status-badge status-warning">{{ status }}</span>
              {% elif 'Critical' in status or 'High' in status %}
                <span class="status-badge status-critical">{{ status }}</span>
              {% else %}
                <span class="status-badge">{{ status }}</span>
              {% endif %}
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-warning">No FNA performance data available.</div>
  {% endif %}
</div>

    <!-- Operations Health Tab -->
    <div class="tab-pane fade" id="ops" role="tabpanel">
      {% if operations %}
        <div class="op-row op-header">
          <div>Funnel Stage</div>
          <div>Metric</div>
          <div>Current</div>
          <div>Target</div>
          <div>Roadmap Link</div>
        </div>
        {% for item in operations %}
          <div class="op-row">
            <div><strong>{{ item.get('Funnel Stage', '–') }}</strong></div>
            <div>{{ item.get('Metric Name', '–') }}</div>
            <div>{{ item.get('Metric Value', '–') }}</div>
            <div>{{ item.get('Target', '–') }}</div>
            <div><code>{{ item.get('Linked Roadmap Item', '–') }}</code></div>
          </div>
        {% endfor %}
      {% else %}
        <div class="alert alert-warning">No operations health data available.</div>
      {% endif %}
    </div>

    <!-- Key Decisions Tab -->
    <div class="tab-pane fade" id="decisions" role="tabpanel">
      {% if decisions %}
        <div class="op-row decision-header">
          <div>Item</div>
          <div>Decision</div>
          <div>Rationale</div>
          <div>Owner</div>
          <div>Deadline / Status</div>
        </div>
        {% for item in decisions %}
          <div class="op-row decision-row">
            <div><strong>{{ item.get('Item', '–') }}</strong></div>
            <div>{{ item.get('Decision/Activity', '–') }}</div>
            <div style="font-size:0.9rem;">{{ item.get('Rationale (Linked to SWOT/Roadmap)', '–') }}</div>
            <div>{{ item.get('Owner', '–') }}</div>
            <div>
              {{ item.get('Deadline', '–') }}<br>
              {% set status = item.get('Status', '') %}
              {% if 'On Track' in status %}
                <span class="status-badge status-ontrack">{{ status }}</span>
              {% elif 'Warning' in status %}
                <span class="status-badge status-warning">{{ status }}</span>
              {% elif 'Critical' in status or 'High' in status %}
                <span class="status-badge status-critical">{{ status }}</span>
              {% elif 'Open' in status %}
                <span class="status-badge status-open">{{ status }}</span>
              {% else %}
                <span class="status-badge">{{ status }}</span>
              {% endif %}
            </div>
          </div>
        {% endfor %}
      {% else %}
        <div class="alert alert-warning">No key decisions data available.</div>
      {% endif %}
    </div>

  </div>

</div>

{% endblock %}