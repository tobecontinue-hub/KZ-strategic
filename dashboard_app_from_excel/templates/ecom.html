{% extends "base.html" %}
{% block content %}

<style>
.container-ecom {
  max-width: 1200px;
  margin: 20px auto;
  padding: 24px;
}
.hero {
  padding: 18px 20px;
  border-radius: 12px;
  background: linear-gradient(90deg,#1e88e5,#00bfa5);
  color: white;
  box-shadow: 0 8px 28px rgba(16,52,84,0.08);
  margin-bottom: 18px;
}
.hero h2 { margin:0; font-size:1.4rem; font-weight:700; letter-spacing: -0.4px; }
.hero p { margin:4px 0 0; opacity:0.95; }

.table-card {
  background: white;
  border-radius: 14px;
  padding: 12px;
  box-shadow: 0 10px 30px rgba(16,52,84,0.06);
  overflow: auto;
}

.ecom-table {
  width: 100%;
  border-collapse: collapse;
  min-width: 900px;
}
.ecom-table thead th {
  position: sticky;
  top:0;
  background: linear-gradient(90deg,#f8fbff,#ffffff);
  padding: 12px 14px;
  text-align: left;
  font-weight:700;
  border-bottom: 2px solid #eef3fb;
  color:#0b2a3a;
  white-space: nowrap;
}
.ecom-table td {
  padding: 12px 14px;
  border-bottom: 1px solid #f2f6f9;
  color:#24343f;
  font-size: 0.95rem;
}
.ecom-table tbody tr:hover {
  background: linear-gradient(90deg,#fbfdff,#f7fbff);
  transform: translateX(2px);
}

/* Highlight growth columns */
.growth-2x { color:#0b63ff; font-weight:700; }
.growth-3x { color:#8e44ff; font-weight:700; }

/* Grand total style */
.total-row td {
  font-weight:800;
  background: linear-gradient(90deg,#f1f9ff,#ffffff);
}

/* Insight box */
.insight {
  margin-top: 16px;
  background: linear-gradient(180deg,#fff,#fbfdff);
  border-left: 6px solid #4C7DFF;
  padding: 14px 16px;
  border-radius: 10px;
  color:#12303b;
  box-shadow: 0 6px 20px rgba(18,48,59,0.04);
}

/* small numbers alignment */
.text-right { text-align: right; }

/* responsive */
@media (max-width: 980px) {
  .container-ecom { padding: 14px; }
  .ecom-table { min-width: 800px; }
}
</style>

<div class="container-ecom">
  <div class="hero">
    <h2>2026 E-commerce Target</h2>
    <p>Brand-level fulfillment, 2x sales target and moonshot (3x) â€” formatted and summarized.</p>
  </div>

  <div class="table-card">
    {% if columns and rows %}
      <table class="ecom-table">
        <thead>
          <tr>
            {% for col in columns %}
              <th>{{ col }}</th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% for r in rows %}
            {# detect total row if first column contains 'Grand' or 'Total' #}
            {% set first = r[columns[0]]|lower %}
            <tr class="{% if 'grand' in first or 'total' in first %}total-row{% endif %}">
              {% for c in columns %}
                {% set val = r[c] %}
                {% if c in ['2026 Sales Target 2X','2026 Moonshot 3X'] %}
                  <td class="{% if '2x' in c|lower %}growth-2x{% else %}growth-3x{% endif %} text-right">{{ val }}</td>
                {% elif val is string and val|length > 0 and val.replace(",", "").replace(".", "").isdigit() %}
                  <td class="text-right">{{ val }}</td>
                {% else %}
                  <td>{{ val }}</td>
                {% endif %}
              {% endfor %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <div style="padding:20px;">No data found for sheet <strong>2026 Ecom Target</strong>.</div>
    {% endif %}
  </div>

  {% if insight %}
    <div class="insight">
      <strong>Insight</strong>
      <div style="margin-top:8px; white-space:pre-wrap;">{{ insight }}</div>
    </div>
  {% endif %}
</div>

{% endblock %}
