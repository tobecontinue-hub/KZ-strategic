<!-- templates/executive_summary.html -->
{% extends "base.html" %}
{% block content %}

<style>
  /* Animations */
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(26px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeIn {
    from { opacity: 0; } to { opacity: 1; }
  }
  @keyframes slideInRight {
    from { opacity: 0; transform: translateX(24px); }
    to { opacity: 1; transform: translateX(0); }
  }
  .animate-fade-in-up { animation: fadeInUp 0.7s ease-out forwards; }
  .animate-fade-in { animation: fadeIn 0.6s ease-out forwards; }
  .animate-slide-in-right { animation: slideInRight 0.55s ease-out forwards; }
  .stagger-1 { animation-delay: 0.1s; opacity: 0; }
  .stagger-2 { animation-delay: 0.2s; opacity: 0; }
  .stagger-3 { animation-delay: 0.3s; opacity: 0; }
  .stagger-4 { animation-delay: 0.4s; opacity: 0; }
  .stagger-5 { animation-delay: 0.5s; opacity: 0; }
  .stagger-6 { animation-delay: 0.6s; opacity: 0; }

  /* Hero */
  .hero {
    position: relative;
    overflow: hidden;
    padding: 2.5rem 1.25rem 1.25rem;
    border-radius: 18px;
    background: linear-gradient(135deg, #ffffff 0%, #e9f1ff 100%);
    box-shadow: 0 10px 28px rgba(11, 99, 255, 0.10);
    margin-bottom: 18px;
  }
  .hero .badge {
    display: inline-block;
    padding: 6px 14px;
    border-radius: 999px;
    font-weight: 700;
    font-size: 0.85rem;
    color: #0b63ff;
    background: #e0eaff;
    position: relative;
    overflow: hidden;
  }
  .hero h1 {
    margin: 10px 0 8px;
    font-weight: 800;
    font-size: 2.4rem;
    line-height: 1.1;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .hero .subtitle {
    color: #475569;
    font-size: 1.05rem;
    max-width: 760px;
  }
  .hero .line {
    display: flex; gap: 10px; align-items: flex-start; margin-top: 12px;
    color: #334155; font-size: 1rem;
  }
  .hero .line svg { width: 22px; height: 22px; flex-shrink: 0; margin-top: 2px; color: #0b63ff; }

  /* Brand Promise banner */
  .brand-banner {
    position: relative;
    border-radius: 20px;
    padding: 24px;
    margin: 16px 0 14px;
    color: #fff;
    background: linear-gradient(135deg, #0b63ff 0%, #0b63ffdd 100%);
    box-shadow: 0 10px 28px rgba(11, 99, 255, 0.18);
    overflow: hidden;
  }
  .brand-banner .decor {
    position: absolute; top: -72px; right: -72px; width: 220px; height: 220px;
    border-radius: 999px; background: rgba(255,255,255,0.22);
    filter: blur(6px); opacity: 0.5;
  }
  .brand-banner h2 { margin: 0 0 8px; font-size: 1.25rem; font-weight: 800; display: flex; gap: 10px; align-items: center; }
  .brand-banner .promise {
    font-size: 1.25rem; font-weight: 700; line-height: 1.45;
  }

  /* Strategic Insight / Summary banners */
  .info-banner {
    background: linear-gradient(120deg, #6a11cb, #2575fc);
    color: #fff; padding: 16px 18px; border-radius: 14px;
    box-shadow: 0 8px 20px rgba(37,117,252,0.18);
    margin-bottom: 16px;
  }
  .info-banner.green {
    background: linear-gradient(120deg, #00b09b, #96c93d);
  }
  .info-banner .text { font-size: 1.05rem; line-height: 1.55; white-space: pre-line; }

  /* KPI Grid */
  .kpi-grid {
    display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 16px; margin-top: 10px;
  }
  .kpi-card {
    background: #fff; border-radius: 14px; padding: 16px;
    box-shadow: 0 10px 22px rgba(0,0,0,0.06);
    border-top: 3px solid #94a3b8;
    transition: transform 0.22s ease, box-shadow 0.22s ease;
    opacity: 0;
  }
  .kpi-card:hover { transform: translateY(-6px); box-shadow: 0 20px 40px rgba(0,0,0,0.12); }
  .kpi-cat { font-size: 0.95rem; color: #073047; font-weight: 700; margin-bottom: 8px; }
  .kpi-value { font-size: 1.45rem; font-weight: 800; color: #073047; }
  .kpi-arrow { font-size: 1.2rem; margin-left: 8px; }
  .arrow-up { color: #00c853; }
  .arrow-down { color: #ff5252; }
  .arrow-level { color: #6c757d; }
  .kpi-highlight {
    background: #e3f2fd; color: #0d47a1; font-weight: 700;
    padding: 2px 10px; border-radius: 14px; font-size: 0.85rem; display: inline-block; margin-top: 6px;
  }
  .kpi-insight {
    margin-top: 10px; padding-top: 8px; border-top: 1px dashed #e2e8f0;
    color: #475569; font-size: 0.9rem; line-height: 1.45;
  }

  /* Small helpers */
  .icon { width: 20px; height: 20px; color: #0b63ff; }
  .mt-4 { margin-top: 1rem; }
  .mb-2 { margin-bottom: .5rem; }
  .mb-3 { margin-bottom: .75rem; }
</style>

<div class="main-container">

  <!-- Hero -->
  <header class="hero animate-fade-in-up stagger-1">
    <div class="badge">Strategic Performance Overview</div>
    <h1>Executive Summary</h1>
    {% if dashboard_subtitle %}
      <div class="subtitle">{{ dashboard_subtitle }}</div>
    {% endif %}

    <div class="mt-4">
      {% if brand_promise %}
      <div class="line animate-fade-in-up stagger-2">
        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
        <div class="brand-promise-text" style="margin:0">“{{ brand_promise }}”</div>
      </div>
      {% endif %}

      {% if mission_statement %}
      <div class="line animate-fade-in-up stagger-3">
        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
        <div class="mission-text" style="margin:0">{{ mission_statement }}</div>
      </div>
      {% endif %}
    </div>
  </header>

  <!-- Brand Promise Feature -->
  {% if brand_promise %}
    <section class="brand-banner animate-fade-in-up stagger-4">
      <div class="decor"></div>
      <h2>
        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/></svg>
        Our Brand Promise
      </h2>
      <div class="promise">“{{ brand_promise }}”</div>
    </section>
  {% endif %}

  <!-- Strategic Insight -->
  {% if strategic_insight %}
    <section class="info-banner green animate-fade-in-up stagger-5">
      <div class="text"><strong>Strategic Insight:</strong> {{ strategic_insight }}</div>
    </section>
  {% endif %}

  <!-- Summary -->
  {% if summary %}
    <section class="info-banner animate-fade-in-up stagger-6">
      <div class="text">{{ summary }}</div>
    </section>
  {% endif %}

  <!-- KPI Grid -->
  {% if points %}
    <section>
      <h2 class="mb-2" style="font-weight: 800; color: #073047;">Key Performance Indicators</h2>
      <div class="kpi-grid">
        {% for item in points %}
          <div class="kpi-card animate-slide-in-right" style="animation-delay: {{ (loop.index0 % 6) * 0.1 }}s;">
            <div class="kpi-cat">{{ item.get('Category', 'KPI') }}</div>
            <div class="d-flex align-items-end mb-3">
              <div class="kpi-value">{{ item.get('Current_Status', '–') }}</div>
              <div class="kpi-arrow">
                {% if item.get('Arrow') == 'up' %}
                  <span class="arrow-up">↗</span>
                {% elif item.get('Arrow') == 'down' %}
                  <span class="arrow-down">↘</span>
                {% else %}
                  <span class="arrow-level">→</span>
                {% endif %}
              </div>
            </div>
            {% if item.get('Highlight') %}
              <div class="kpi-highlight">{{ item.get('Highlight') }}</div>
            {% endif %}
            {% if item.get('Key_Insight') %}
              <div class="kpi-insight">{{ item.get('Key_Insight') }}</div>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    </section>
  {% endif %}
</div>

{% endblock %}
